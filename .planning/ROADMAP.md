# Roadmap: BBj Language Server

## Milestones

- âœ… **v1.0 Internal Alpha** â€” Phases 1-6 (shipped 2026-02-01)
- âœ… **v1.1 Polish & Run Commands** â€” Phases 7-10 (shipped 2026-02-02)
- âœ… **v1.2 Run Fixes & Marketplace** â€” Phases 11-13 (shipped 2026-02-02)
- âœ… **v2.0 Langium 4 Upgrade** â€” Phases 14-20 (shipped 2026-02-04)
- âœ… **v2.1 Feature Gap Analysis** â€” Research only (shipped 2026-02-04)
- âœ… **v2.2 IntelliJ Build & Release Automation** â€” Phases 21-23 (shipped 2026-02-05)
- âœ… **v3.0 Improving BBj Language Support** â€” Phases 24-27 (shipped 2026-02-06)
- âœ… **v3.1 PRIO 1+2 Issue Burndown** â€” Phases 28-31 (shipped 2026-02-07)
- âœ… **v3.2 Bug Fix Release** â€” Phases 32-34 (shipped 2026-02-08)
- âœ… **v3.3 Output & Diagnostic Cleanup** â€” Phases 35-39 (shipped 2026-02-08)
- âœ… **v3.4 0.8.0 Issue Closure** â€” Phases 40-43 (shipped 2026-02-08)
- âœ… **v3.5 Documentation for 0.8.0 Release** â€” Phases 44-47 (shipped 2026-02-09)
- âœ… **v3.6 IntelliJ Platform API Compatibility** â€” Phases 48-49 (shipped 2026-02-10)
- âœ… **v3.7 Diagnostic Quality & BBjCPL Integration** â€” Phases 50-53 (shipped 2026-02-20)
- âœ… **v3.8 Test & Debt Cleanup** â€” Phases 54-56 (shipped 2026-02-20)
- ðŸš§ **v3.9 Quick Wins** â€” Phases 57-59 (in progress)

## Phases

<details>
<summary>âœ… v1.0 Internal Alpha (Phases 1-6) â€” SHIPPED 2026-02-01</summary>

- [x] Phase 1: Plugin Scaffolding (3/3 plans)
- [x] Phase 2: Syntax Highlighting (2/2 plans)
- [x] Phase 3: Settings & Runtime (3/3 plans)
- [x] Phase 4: Language Server Integration (5/5 plans)
- [x] Phase 5: Java Interop (3/3 plans)
- [x] Phase 6: Distribution (3/3 plans)

</details>

<details>
<summary>âœ… v1.1 Polish & Run Commands (Phases 7-10) â€” SHIPPED 2026-02-02</summary>

- [x] Phase 7: Brand Icons (1/1 plan)
- [x] Phase 8: Run Commands (2/2 plans)
- [x] Phase 9: Structure View (1/1 plan)
- [x] Phase 10: Bug Fixes & Polish (2/2 plans)

</details>

<details>
<summary>âœ… v1.2 Run Fixes & Marketplace (Phases 11-13) â€” SHIPPED 2026-02-02</summary>

- [x] Phase 11: Run Command Fixes (2/2 plans)
- [x] Phase 12: Marketplace Preparation (2/2 plans)
- [x] Phase 13: Plugin ID Fix (1/1 plan)

</details>

<details>
<summary>âœ… v2.0 Langium 4 Upgrade (Phases 14-20) â€” SHIPPED 2026-02-04</summary>

- [x] Phase 14: Deps & Grammar (1/1 plan)
- [x] Phase 15: Core API Renames & Type Constants (2/2 plans)
- [x] Phase 16: API Signature & Deprecated API Migration (2/2 plans)
- [x] Phase 17: Build Verification & Test Suite (2/2 plans)
- [x] Phase 18: Functional Verification & Release (2/2 plans)
- [x] Phase 19: Test Plan (1/1 plan)
- [x] Phase 20: Human QA Testing (1/1 plan)

</details>

<details>
<summary>âœ… v2.1 Feature Gap Analysis â€” SHIPPED 2026-02-04</summary>

Research-only milestone â€” no phases.

</details>

<details>
<summary>âœ… v2.2 IntelliJ Build & Release Automation (Phases 21-23) â€” SHIPPED 2026-02-05</summary>

- [x] Phase 21: Preview Workflow (1/1 plan)
- [x] Phase 22: Release Workflow (1/1 plan)
- [x] Phase 23: PR Validation (1/1 plan)

</details>

<details>
<summary>âœ… v3.0 Improving BBj Language Support (Phases 24-27) â€” SHIPPED 2026-02-06</summary>

- [x] Phase 24: Grammar & Parsing Fixes (3/3 plans)
- [x] Phase 25: Type Resolution & Crash Fixes (3/3 plans)
- [x] Phase 26: CPU Stability (2/2 plans)
- [x] Phase 27: IDE Polish (3/3 plans)

</details>

<details>
<summary>âœ… v3.1 PRIO 1+2 Issue Burndown (Phases 28-31) â€” SHIPPED 2026-02-07</summary>

- [x] Phase 28: Variable Scoping & Declaration Order (4/4 plans)
- [x] Phase 29: DEF FN & Inheritance Resolution (3/3 plans)
- [x] Phase 30: Java Reflection & Error Reporting (3/3 plans)
- [x] Phase 31: Extension Settings & File Types (3/3 plans)

</details>

<details>
<summary>âœ… v3.2 Bug Fix Release (Phases 32-34) â€” SHIPPED 2026-02-08</summary>

- [x] Phase 32: Regression Fixes (4/4 plans)
- [x] Phase 33: Parser & Lexer Fixes (4/4 plans)
- [x] Phase 34: Diagnostic Polish (2/2 plans)

</details>

<details>
<summary>âœ… v3.3 Output & Diagnostic Cleanup (Phases 35-39) â€” SHIPPED 2026-02-08</summary>

- [x] Phase 35: Logger Infrastructure (1/1 plan)
- [x] Phase 36: Settings Plumbing (1/1 plan)
- [x] Phase 37: Console Migration (2/2 plans)
- [x] Phase 38: Diagnostic Filtering (1/1 plan)
- [x] Phase 39: Parser Diagnostics (1/1 plan)

</details>

<details>
<summary>âœ… v3.4 0.8.0 Issue Closure (Phases 40-43) â€” SHIPPED 2026-02-08</summary>

- [x] Phase 40: Parser Fix (1/1 plan)
- [x] Phase 41: File Type Fix (1/1 plan)
- [x] Phase 42: Toolbar Button Polish (1/1 plan)
- [x] Phase 43: Run Command Fixes (1/1 plan)

</details>

<details>
<summary>âœ… v3.5 Documentation for 0.8.0 Release (Phases 44-47) â€” SHIPPED 2026-02-09</summary>

- [x] Phase 44: Site Chrome for Dual-IDE Support (2/2 plans)
- [x] Phase 45: IntelliJ User Guide Creation (2/2 plans)
- [x] Phase 46: VS Code User Guide Audit (2/2 plans)
- [x] Phase 47: Documentation Cleanup (1/1 plan)

</details>

<details>
<summary>âœ… v3.6 IntelliJ Platform API Compatibility (Phases 48-49) â€” SHIPPED 2026-02-10</summary>

- [x] Phase 48: Fix Scheduled-for-Removal APIs (1/1 plan)
- [x] Phase 49: Fix Deprecated APIs and Verify (1/1 plan)

</details>

<details>
<summary>âœ… v3.7 Diagnostic Quality & BBjCPL Integration (Phases 50-53) â€” SHIPPED 2026-02-20</summary>

- [x] Phase 50: Diagnostic Noise Reduction (2/2 plans) â€” completed 2026-02-19
- [x] Phase 51: Outline Resilience (1/1 plan) â€” completed 2026-02-19
- [x] Phase 52: BBjCPL Foundation (2/2 plans) â€” completed 2026-02-20
- [x] Phase 53: BBjCPL Diagnostic Integration (2/2 plans) â€” completed 2026-02-20

</details>

<details>
<summary>âœ… v3.8 Test & Debt Cleanup (Phases 54-56) â€” SHIPPED 2026-02-20</summary>

- [x] Phase 54: Fix Failing Tests (2/2 plans) â€” completed 2026-02-20
- [x] Phase 55: Test Hardening & Dead Code (2/2 plans) â€” completed 2026-02-20
- [x] Phase 56: Production FIXME & TODO Resolution (3/3 plans) â€” completed 2026-02-20

</details>

### ðŸš§ v3.9 Quick Wins (In Progress)

**Milestone Goal:** Fix reported bugs, add missing grammar verbs, and close quick feature gaps (static methods, constructors, deprecated indicators).

- [x] **Phase 57: Bug Fixes** â€” Fix four reported regressions (EM Config, config.bbx highlighting, suffixed identifiers, DECLARE in class body) (completed 2026-02-20)
- [x] **Phase 58: Grammar Additions** â€” Add missing EXIT parameter, SERIAL verb, and ADDR verb to parser (completed 2026-02-20)
- [x] **Phase 59: Java Class Reference Features** â€” Add .class resolution, static method completion, deprecated indicators, and constructor completion (completed 2026-02-20)

## Phase Details

### Phase 57: Bug Fixes
**Goal**: Four reported regressions are eliminated â€” DWC/BUI launches work, config.bbx files are highlighted, suffixed variable identifiers parse cleanly, and DECLARE in class body no longer breaks the parser
**Depends on**: Phase 56 (v3.8 complete)
**Requirements**: BUG-01, BUG-02, BUG-03, BUG-04
**Success Criteria** (what must be TRUE):
  1. Launching a DWC or BUI program with EM Config "--" set completes without startup failure
  2. Opening a config.bbx file shows BBj syntax highlighting (keywords, strings, comments colored)
  3. Variables named `releaseVersion!`, `stepMode!`, or any keyword-prefixed suffixed identifier parse without a red squiggly error
  4. A DECLARE statement written in a class body outside any method does not produce a parse error
**Plans**: 2 plans
Plans:
- [ ] 57-01-PLAN.md â€” EM Config "--" sentinel stripping + config.bbx file association exclusion
- [ ] 57-02-PLAN.md â€” RELEASE token LONGER_ALT fix + DECLARE in class body grammar recovery

### Phase 58: Grammar Additions
**Goal**: The BBj parser recognizes three previously unsupported constructs â€” EXIT with an integer argument, the SERIAL verb, and the ADDR verb â€” so valid BBj programs no longer produce false parse errors
**Depends on**: Phase 57
**Requirements**: GRAM-01, GRAM-02, GRAM-03
**Success Criteria** (what must be TRUE):
  1. `EXIT 0`, `EXIT 1`, and bare `EXIT` all parse without error in any program context
  2. A statement using the SERIAL verb parses without error and appears in the AST
  3. The ADDR verb parses without error as a standalone statement, accepting any string expression as fileid
**Plans**: 2 plans
Plans:
- [ ] 58-01-PLAN.md â€” EXIT verb with optional numeric argument (custom tokens + grammar)
- [ ] 58-02-PLAN.md â€” SERIAL verb addition + ADDR fileid broadened to Expression

### Phase 59: Java Class Reference Features
**Goal**: Completion and type resolution for Java class references are meaningfully richer â€” `.class` resolves to java.lang.Class, static methods are offered on class reference variables, deprecated methods show strikethrough in the completion list, and `new ClassName()` expressions trigger constructor completion
**Depends on**: Phase 58
**Requirements**: FEAT-01, FEAT-02, FEAT-03, FEAT-04
**Success Criteria** (what must be TRUE):
  1. Writing `.class` after a Java class reference (e.g., `String.class`) resolves to java.lang.Class and does not produce an "unresolvable" warning
  2. Typing `.` on a variable declared via USE as a Java class reference offers static methods of that class in the completion list
  3. Deprecated methods appear in the completion list with strikethrough text decoration, distinguishing them from non-deprecated methods
  4. After `new ClassName(`, the completion list offers constructor signatures for that class
**Plans**: 4 plans
Plans:
- [ ] 59-01-PLAN.md â€” Java backend + Langium type model: isStatic, isDeprecated, constructors
- [ ] 59-02-PLAN.md â€” .class resolution + static method completion on USE class references
- [ ] 59-03-PLAN.md â€” Deprecated strikethrough indicators + constructor completion
- [ ] 59-04-PLAN.md â€” Gap closure: isStatic race condition fix, MemberCall isClassRef, constructor trigger char, JAR deployment

## Progress

| Milestone | Phases | Plans | Status | Shipped |
|-----------|--------|-------|--------|---------|
| v1.0 Internal Alpha | 1-6 | 19 | Complete | 2026-02-01 |
| v1.1 Polish & Run Commands | 7-10 | 6 | Complete | 2026-02-02 |
| v1.2 Run Fixes & Marketplace | 11-13 | 5 | Complete | 2026-02-02 |
| v2.0 Langium 4 Upgrade | 14-20 | 11 | Complete | 2026-02-04 |
| v2.1 Feature Gap Analysis | N/A | N/A | Complete | 2026-02-04 |
| v2.2 IntelliJ Build & Release Automation | 21-23 | 3 | Complete | 2026-02-05 |
| v3.0 BBj Language Support | 24-27 | 11 | Complete | 2026-02-06 |
| v3.1 PRIO 1+2 Burndown | 28-31 | 13 | Complete | 2026-02-07 |
| v3.2 Bug Fix Release | 32-34 | 10 | Complete | 2026-02-08 |
| v3.3 Output & Diagnostic Cleanup | 35-39 | 6 | Complete | 2026-02-08 |
| v3.4 0.8.0 Issue Closure | 40-43 | 4 | Complete | 2026-02-08 |
| v3.5 Documentation | 44-47 | 7 | Complete | 2026-02-09 |
| v3.6 API Compatibility | 48-49 | 2 | Complete | 2026-02-10 |
| v3.7 Diagnostic Quality & BBjCPL | 50-53 | 7 | Complete | 2026-02-20 |
| v3.8 Test & Debt Cleanup | 54-56 | 7 | Complete | 2026-02-20 |
| v3.9 Quick Wins | 57-59 | TBD | In progress | - |

**Total:** 15 milestones shipped, 56 phases complete, 135 plans shipped. 3 phases planned for v3.9.

---

*Roadmap last updated: 2026-02-20 after v3.9 roadmap creation*
