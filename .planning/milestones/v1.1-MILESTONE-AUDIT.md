---
milestone: v1.1
audited: 2026-02-02T09:00:00Z
status: tech_debt
scores:
  requirements: 28/28
  phases: 4/4
  integration: 7/7
  flows: 7/7
gaps: []
tech_debt:
  - phase: 09-structure-view
    items:
      - "Symbol kind differentiation: LabelDecl, VariableDecl, and FieldDecl all map to SymbolKind.Field in BBjNodeKindProvider, resulting in identical icons in Structure View (language server issue, not plugin issue)"
  - phase: 10-bug-fixes-polish
    items:
      - "Phase 10 VERIFICATION.md recorded FIX-05 as FAILED at time of writing, but gap was subsequently fixed in commit b3a8370 — VERIFICATION.md not updated to reflect fix"
      - "BbjCompletionFeature relies on LSPCompletionFeature API which may not be stable across LSP4IJ versions"
      - "Grace period (30-second LS shutdown delay) tested via build compilation only — runtime behavior not yet validated by human"
      - "Run command output not captured in IntelliJ console tool window (process stdout/stderr not piped)"
  - phase: 08-run-commands
    items:
      - "Working directory for GUI run uses project root (project.getBasePath()) instead of file directory (path.dirname) — documented deviation from VSCode behavior"
      - "EM credentials stored in BbjSettings.State as plaintext (admin/admin123 defaults)"
---

# v1.1 Milestone Audit Report

**Milestone:** v1.1 — Polish & Run Commands
**Audited:** 2026-02-02
**Status:** All requirements satisfied. Tech debt items identified for review.

## Executive Summary

All 28 v1.1 requirements are satisfied across 4 phases (7-10). All 7 end-to-end flows verified complete. Cross-phase integration is fully connected with zero broken links. The only gap identified during Phase 10 verification (FIX-05 completion icons orphaned) was subsequently fixed in commit `b3a8370`. Non-critical tech debt items exist across 3 phases.

## Requirements Coverage

| Requirement | Phase | Status |
|-------------|-------|--------|
| ICON-01: BBj brand file icon for .bbj/.bbl/.bbjt/.src | Phase 7 | ✓ Satisfied |
| ICON-02: BBj config icon for .bbx files | Phase 7 | ✓ Satisfied |
| ICON-03: BBj brand icon as plugin listing icon | Phase 7 | ✓ Satisfied |
| ICON-04: Run GUI toolbar button uses run-gui icon | Phase 7 | ✓ Satisfied |
| ICON-05: Run BUI toolbar button uses run-bui icon | Phase 7 | ✓ Satisfied |
| ICON-06: Run DWC toolbar button uses run-dwc icon | Phase 7 | ✓ Satisfied |
| RUN-01: Run current BBj file as GUI | Phase 8 | ✓ Satisfied |
| RUN-02: Run current BBj file as BUI | Phase 8 | ✓ Satisfied |
| RUN-03: Run current BBj file as DWC | Phase 8 | ✓ Satisfied |
| RUN-04: Run actions in toolbar | Phase 8 | ✓ Satisfied |
| RUN-05: Alt+G keyboard shortcut | Phase 8 | ✓ Satisfied |
| RUN-06: Alt+B keyboard shortcut | Phase 8 | ✓ Satisfied |
| RUN-07: Alt+D keyboard shortcut | Phase 8 | ✓ Satisfied |
| RUN-08: Run commands use BBj home from settings | Phase 8 | ✓ Satisfied |
| RUN-09: Run commands use classpath from settings | Phase 8 | ✓ Satisfied |
| RUN-10: Auto-save before run (configurable) | Phase 8 | ✓ Satisfied |
| RUN-11: Error display in notification balloons | Phase 8 | ✓ Satisfied |
| RUN-12: Bundled web.bbj runner script | Phase 8 | ✓ Satisfied |
| STRUC-01: Structure window shows symbols | Phase 9 | ✓ Satisfied |
| STRUC-02: Structure view updates on edit | Phase 9 | ✓ Satisfied |
| STRUC-03: Click-to-navigate in Structure view | Phase 9 | ✓ Satisfied |
| FIX-01: Comment toggling with REM | Phase 10 | ✓ Satisfied |
| FIX-02: Bracket matching for (), [], {} | Phase 10 | ✓ Satisfied |
| FIX-03: LSP Symbol popup suppressed | Phase 10 | ✓ Satisfied |
| FIX-04: LS shutdown grace period | Phase 10 | ✓ Satisfied |
| FIX-05: Completion icons (function, variable, keyword) | Phase 10 | ✓ Satisfied (fixed in b3a8370) |
| FIX-06: Stale META-INF removed | Phase 10 | ✓ Satisfied |
| FIX-07: Linux code paths reviewed | Phase 10 | ✓ Satisfied |

**Score: 28/28 requirements satisfied**

## Phase Verification Summary

| Phase | Status | Score | Key Finding |
|-------|--------|-------|-------------|
| 7. Brand Icons | Passed | 5/5 | All icons display correctly, human verified |
| 8. Run Commands | Passed | 5/5 | All run modes work, web.bbj bundled correctly |
| 9. Structure View | Passed | 3/3 | DocumentSymbol integration works, human verified |
| 10. Bug Fixes & Polish | Passed* | 5/5 | *FIX-05 was orphaned at verification time but fixed in b3a8370 |

**Score: 4/4 phases passed**

## Cross-Phase Integration

| Connection | Status |
|-----------|--------|
| Phase 7 icons → Phase 8 run actions | ✓ Connected (BbjIcons.RUN_GUI/BUI/DWC used in action constructors) |
| Phase 7 icons → BbxConfigFileType | ✓ Connected (BbjIcons.CONFIG in getIcon()) |
| Phase 8 settings → Run actions | ✓ Connected (bbjHomePath, classpath, EM credentials, autoSave all wired) |
| Phase 9 Structure → LSP4IJ | ✓ Connected (psiStructureViewFactory extension point) |
| Phase 10 comment toggling → Editor | ✓ Connected (BbjCommenter + code style provider) |
| Phase 10 bracket matching → Lexer | ✓ Connected (BbjWordLexer → BbjTokenTypes → BbjPairedBraceMatcher) |
| Phase 10 hover suppression → LSP4IJ | ✓ Connected (LSPHoverFeature.isSupported() = false) |
| Phase 10 grace period → Status bar | ✓ Connected (BbjServerService → BbjStatusBarWidget "BBj: Idle") |
| Phase 10 completion icons → LSP4IJ | ✓ Connected (BbjCompletionFeature wired via setCompletionFeature()) |
| Build: web.bbj bundling | ✓ Connected (copyWebRunner task + prepareSandbox) |
| plugin.xml coherence | ✓ No conflicts (all IDs unique, shortcuts non-overlapping) |

**Score: 7/7 integration points verified**

## E2E Flow Verification

| Flow | Status | Steps Verified |
|------|--------|---------------|
| Icon display | ✓ Complete | BbjIcons → FileType.getIcon() → editor tab/project tree |
| Run GUI | ✓ Complete | Action trigger → auto-save → settings read → bbj command → process spawn |
| Run BUI/DWC | ✓ Complete | Action trigger → auto-save → settings + web.bbj → bbj command → process spawn |
| Structure view | ✓ Complete | Structure window → documentSymbol request → tree render → click navigate |
| Comment toggling | ✓ Complete | Cmd+/ → BbjCommenter "REM " → code style column 0 → toggle |
| Bracket matching | ✓ Complete | Cursor near bracket → BbjWordLexer token → BbjPairedBraceMatcher → highlight |
| LS lifecycle | ✓ Complete | File open → server start → file close → grace period → timer/cancel → stop/reuse |

**Score: 7/7 flows complete**

## Tech Debt

### Phase 9: Structure View
- **Symbol kind icons:** LabelDecl, VariableDecl, and FieldDecl all map to SymbolKind.Field in BBjNodeKindProvider, resulting in identical icons in Structure View. This is a language server issue (bbj-node-kind.ts), not a plugin issue.

### Phase 10: Bug Fixes & Polish
- **Stale verification:** Phase 10 VERIFICATION.md still records FIX-05 as FAILED, but the gap was fixed in commit b3a8370. The verification document was not retroactively updated.
- **LSP4IJ API stability:** BbjCompletionFeature relies on LSPCompletionFeature API which may not be stable across LSP4IJ version upgrades.
- **Grace period untested at runtime:** The 30-second LS shutdown delay was verified structurally but not yet validated by human in a running IDE.
- **No run output capture:** Run commands spawn processes but don't pipe stdout/stderr to IntelliJ's Run tool window.

### Phase 8: Run Commands
- **Working directory deviation:** GUI run uses project root (`project.getBasePath()`) instead of file directory (`path.dirname`), a documented deviation from VSCode behavior.
- **Plaintext credentials:** EM username/password stored as plaintext in BbjSettings.State with admin/admin123 defaults.

### Total: 6 items across 3 phases

None of these are blocking. All are quality-of-life improvements or documentation consistency items.

## Build Verification

```
./gradlew buildPlugin → BUILD SUCCESSFUL
```

- All Java sources compile
- All SVG icons bundled in JAR
- web.bbj bundled at lib/tools/
- plugin.xml validated (all referenced classes exist)
- No stale files (META-INF duplicate removed, orphaned SVGs deleted)

---

*Audited: 2026-02-02*
*Auditor: Claude (gsd-audit-milestone orchestrator + gsd-integration-checker)*
