# Requirements Archive: v1.1 Polish & Run Commands

**Archived:** 2026-02-02
**Status:** SHIPPED

This is the archived requirements specification for v1.1.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## v1.1 Requirements

**Defined:** 2026-02-01
**Core Value:** BBj developers using IntelliJ get the same language intelligence they have in VS Code — through a single shared language server.

### Icons

- [x] **ICON-01**: Plugin uses BBj brand file icon (from VSCode bbj-file SVGs) for .bbj/.bbl/.bbjt/.src files in light and dark themes
- [x] **ICON-02**: Plugin uses BBj config icon (from VSCode bbj-config SVGs) for .bbx files in light and dark themes
- [x] **ICON-03**: Plugin uses BBj brand icon (from VSCode icon.png) as marketplace/plugin listing icon
- [x] **ICON-04**: Run GUI toolbar button uses VSCode run-gui icon (light/dark)
- [x] **ICON-05**: Run BUI toolbar button uses VSCode run-bui icon (light/dark)
- [x] **ICON-06**: Run DWC toolbar button uses VSCode run-dwc icon (light/dark)

### Run Commands

- [x] **RUN-01**: User can run current BBj file as GUI program via menu action (spawns bbj executable with -q flag and file path)
- [x] **RUN-02**: User can run current BBj file as BUI program via menu action (uses bundled web.bbj runner with BUI client type)
- [x] **RUN-03**: User can run current BBj file as DWC program via menu action (uses bundled web.bbj runner with DWC client type)
- [x] **RUN-04**: Run GUI/BUI/DWC actions appear as toolbar buttons in the editor toolbar
- [x] **RUN-05**: Run GUI action has keyboard shortcut Alt+G
- [x] **RUN-06**: Run BUI action has keyboard shortcut Alt+B
- [x] **RUN-07**: Run DWC action has keyboard shortcut Alt+D
- [x] **RUN-08**: Run commands use BBj home path from plugin settings to locate bbj executable
- [x] **RUN-09**: Run commands use classpath from plugin settings when configured
- [x] **RUN-10**: Run commands auto-save the active file before execution (configurable)
- [x] **RUN-11**: Run command errors display in IntelliJ notification balloons
- [x] **RUN-12**: Plugin bundles web.bbj runner script for BUI/DWC execution

### Structure View

- [x] **STRUC-01**: Document outline / Structure tool window shows symbols from the language server (classes, methods, variables, labels)
- [x] **STRUC-02**: Structure view updates when document changes
- [x] **STRUC-03**: Clicking a symbol in Structure view navigates to its location in the editor

### Bug Fixes

- [x] **FIX-01**: Comment toggling (Ctrl+/ / Cmd+/) inserts/removes REM prefix on selected lines
- [x] **FIX-02**: Bracket matching works for parentheses, square brackets, and curly braces
- [x] **FIX-03**: "LSP Symbol ..." popup text on Cmd+hover is suppressed or shows meaningful content
- [x] **FIX-04**: Language server stays alive briefly after last BBj file is closed (grace period to avoid restart on quick file switches)
- [x] **FIX-05**: BbjCompletionFeature custom icons (function, variable, keyword) display in completion popup
- [x] **FIX-06**: Stale bbj-intellij/META-INF/plugin.xml file removed or consolidated
- [x] **FIX-07**: Linux code paths reviewed for correctness (process spawning, path separators, Node.js detection)

### Future Requirements (Deferred)

- **ENH-01**: Semantic token highlighting (more precise than TextMate)
- **ENH-02**: Find references across files
- **ENH-03**: Rename refactoring
- **ENH-04**: Code formatting
- **DEV-01**: Debugging support (breakpoints, step through)
- **DEV-02**: BBj project wizard/templates
- **DEV-03**: JetBrains Marketplace publication

### Out of Scope

| Feature | Reason |
|---------|--------|
| Native IntelliJ parser/lexer | LSP4IJ approach reuses existing LS — no need to rewrite |
| Full run configurations (with run/debug toolbar) | Run actions sufficient for v1.1; full RunConfiguration infrastructure deferred |
| Decompile/denumber commands | VSCode-specific workflow, not requested for IntelliJ |
| Compile command | Not requested for this milestone |
| Open config/properties/EM commands | VSCode convenience commands, not prioritized |
| Web runner settings (username/password/app names) | Use defaults for v1.1; settings expansion deferred |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| ICON-01 | Phase 7 | Complete |
| ICON-02 | Phase 7 | Complete |
| ICON-03 | Phase 7 | Complete |
| ICON-04 | Phase 7 | Complete |
| ICON-05 | Phase 7 | Complete |
| ICON-06 | Phase 7 | Complete |
| RUN-01 | Phase 8 | Complete |
| RUN-02 | Phase 8 | Complete |
| RUN-03 | Phase 8 | Complete |
| RUN-04 | Phase 8 | Complete |
| RUN-05 | Phase 8 | Complete |
| RUN-06 | Phase 8 | Complete |
| RUN-07 | Phase 8 | Complete |
| RUN-08 | Phase 8 | Complete |
| RUN-09 | Phase 8 | Complete |
| RUN-10 | Phase 8 | Complete |
| RUN-11 | Phase 8 | Complete |
| RUN-12 | Phase 8 | Complete |
| STRUC-01 | Phase 9 | Complete |
| STRUC-02 | Phase 9 | Complete |
| STRUC-03 | Phase 9 | Complete |
| FIX-01 | Phase 10 | Complete |
| FIX-02 | Phase 10 | Complete |
| FIX-03 | Phase 10 | Complete |
| FIX-04 | Phase 10 | Complete |
| FIX-05 | Phase 10 | Complete |
| FIX-06 | Phase 10 | Complete |
| FIX-07 | Phase 10 | Complete |

---

## Milestone Summary

**Shipped:** 28 of 28 v1.1 requirements
**Adjusted:** None — all requirements shipped as originally specified
**Dropped:** None

---
*Archived: 2026-02-02 as part of v1.1 milestone completion*
